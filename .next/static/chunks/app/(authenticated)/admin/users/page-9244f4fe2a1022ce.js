(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[401],{2515:function(e,t,n){Promise.resolve().then(n.bind(n,2139))},6463:function(e,t,n){"use strict";var r=n(1169);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}})},2139:function(e,t,n){"use strict";n.d(t,{UsersTab:function(){return o}});var r=n(7437),i=n(2265),s=n(6463),a=n(9354);function u(e){let{data:t,columns:n,onRowClick:i}=e;return(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsx)("tr",{children:n.map(e=>(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:e.width},children:e.label},e.key))})}),(0,r.jsxs)("tbody",{className:"divide-y divide-gray-100",children:[t.map((e,t)=>{var s;return(0,r.jsx)("tr",{onClick:()=>null==i?void 0:i(e),className:(0,a.cn)("hover:bg-amber-50 transition-colors",i&&"cursor-pointer"),children:n.map(t=>{var n,i;return(0,r.jsx)("td",{className:"px-4 py-3 text-sm",children:t.render?t.render(e):null!==(i=null===(n=e[t.key])||void 0===n?void 0:n.toString())&&void 0!==i?i:"-"},t.key)})},null!==(s=e.id)&&void 0!==s?s:t)}),0===t.length&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:n.length,className:"px-4 py-8 text-center text-gray-500",children:"暂无数据"})})]})]})})}var l=n(649);function o(e){let{initialUsers:t}=e;(0,s.useRouter)();let[n,o]=(0,i.useState)(t),[c,d]=(0,i.useState)(!1),g=async()=>{d(!0);try{let e=await fetch("/api/admin/users");if(e.ok){let t=await e.json();o(t)}}finally{d(!1)}};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"用户管理"}),(0,r.jsx)("button",{onClick:g,disabled:c,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 disabled:opacity-50",children:c?"刷新中...":"刷新"})]}),(0,r.jsx)(u,{data:n,columns:[{key:"id",label:"ID",width:"80px"},{key:"username",label:"用户名"},{key:"is_admin",label:"管理员",render:e=>(0,r.jsx)(l.C,{variant:e.is_admin?"amber":"gray",children:e.is_admin?"管理员":"普通用户"})},{key:"created_at",label:"创建时间",render:e=>(0,a.p6)(e.created_at)}]})]})}},649:function(e,t,n){"use strict";n.d(t,{C:function(){return s}});var r=n(7437),i=n(9354);function s(e){let{children:t,variant:n="gray",className:s}=e;return(0,r.jsx)("span",{className:(0,i.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold",{"bg-amber-100 text-amber-700":"amber"===n,"bg-gray-100 text-gray-600":"gray"===n,"bg-green-100 text-green-700":"green"===n,"bg-red-100 text-red-700":"red"===n,"bg-blue-100 text-blue-700":"blue"===n,"bg-yellow-100 text-yellow-700":"yellow"===n,"bg-purple-100 text-purple-700":"purple"===n},s),children:t})}},9354:function(e,t,n){"use strict";n.d(t,{K7:function(){return c},cn:function(){return s},mE:function(){return l},ol:function(){return d},p1:function(){return o},p6:function(){return u},sS:function(){return a}});var r=n(4839),i=n(6164);function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,i.m6)((0,r.W)(t))}function a(e){return e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB"}function u(e){if(!e)return"-";let t=new Date(e);return t.setMinutes(t.getMinutes()+552),t.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function l(e){return({docx:"DOCX文档",user_info:"个人信息",screenshot:"反馈截图"})[e]||e}function o(e){return({docx:"badge-blue",user_info:"badge-green",screenshot:"badge-purple"})[e]||""}function c(e){return({suggestion:"功能建议",bug:"Bug报告",ux:"用户体验",performance:"性能问题",other:"其他"})[e]||e}function d(e){return({pending:"待处理",processing:"处理中",resolved:"已解决",closed:"已关闭"})[e]||e}}},function(e){e.O(0,[868,971,23,744],function(){return e(e.s=2515)}),_N_E=e.O()}]);