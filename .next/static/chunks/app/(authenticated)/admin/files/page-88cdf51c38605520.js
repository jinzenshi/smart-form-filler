(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[224],{7146:function(e,t,r){Promise.resolve().then(r.bind(r,5621))},8030:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(2265);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:d="",children:o,iconNode:u,...f}=e;return(0,n.createElement)("svg",{ref:t,...c,width:a,height:a,stroke:r,strokeWidth:l?24*Number(i)/Number(a):i,className:s("lucide",d),...f},[...u.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(o)?o:[o]])}),l=(e,t)=>{let r=(0,n.forwardRef)((r,c)=>{let{className:l,...d}=r;return(0,n.createElement)(i,{ref:c,iconNode:t,className:s("lucide-".concat(a(e)),l),...d})});return r.displayName="".concat(e),r}},4697:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(8030).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8064:function(e,t,r){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return a}});let n=r(4590);function a(e){let{createServerReference:t}=r(6671);return t(e,n.callServer)}},5621:function(e,t,r){"use strict";r.d(t,{FilesTab:function(){return f}});var n=r(7437),a=r(2265),s=r(649),c=r(6760),i=r(4530),l=r(9155),d=r(9354),o=r(5105),u=r(5722);function f(e){let{initialFiles:t}=e,[r,f]=(0,a.useState)(t),[x,m]=(0,a.useState)(""),[p,b]=(0,a.useState)(""),[g,h]=(0,a.useTransition)(),y=(0,u.p)(),v=r.filter(e=>(!x||e.file_type===x)&&(!p||!!e.username.includes(p))),j=async e=>{confirm("确定删除此文件？")&&h(async()=>{try{await (0,o._I)(e),f(t=>t.filter(t=>t.id!==e)),y.success("删除成功")}catch(e){y.error("删除失败")}})},N=(e,t)=>{let r=document.createElement("a");r.href=e,r.download=t,r.click()};return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"文件管理"}),(0,n.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,n.jsxs)(i.P,{value:x,onChange:e=>m(e.target.value),className:"w-36",children:[(0,n.jsx)("option",{value:"",children:"所有类型"}),(0,n.jsx)("option",{value:"docx",children:"DOCX文档"}),(0,n.jsx)("option",{value:"user_info",children:"个人信息"}),(0,n.jsx)("option",{value:"screenshot",children:"反馈截图"})]}),(0,n.jsx)(l.I,{type:"text",placeholder:"筛选用户名",value:p,onChange:e=>b(e.target.value),className:"w-40"})]})]}),(0,n.jsx)("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:(0,n.jsxs)("table",{className:"w-full",children:[(0,n.jsx)("thead",{className:"bg-gray-50",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),(0,n.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"用户"}),(0,n.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"类型"}),(0,n.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"文件名"}),(0,n.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"大小"}),(0,n.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"上传时间"}),(0,n.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"操作"})]})}),(0,n.jsxs)("tbody",{className:"divide-y divide-gray-100",children:[v.map(e=>(0,n.jsxs)("tr",{className:"hover:bg-amber-50 transition-colors",children:[(0,n.jsx)("td",{className:"px-4 py-3 font-mono text-sm",children:e.id}),(0,n.jsx)("td",{className:"px-4 py-3",children:e.username}),(0,n.jsx)("td",{className:"px-4 py-3",children:(0,n.jsx)(s.C,{variant:(0,d.p1)(e.file_type),children:(0,d.mE)(e.file_type)})}),(0,n.jsx)("td",{className:"px-4 py-3",children:e.original_filename}),(0,n.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:(0,d.sS)(e.file_size)}),(0,n.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:(0,d.p6)(e.created_at)}),(0,n.jsxs)("td",{className:"px-4 py-3 flex gap-2",children:[(0,n.jsx)(c.z,{onClick:()=>N(e.public_url,e.original_filename),variant:"secondary",size:"sm",children:"下载"}),(0,n.jsx)(c.z,{onClick:()=>j(e.id),variant:"danger",size:"sm",children:"删除"})]})]},e.id)),0===v.length&&(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"暂无文件"})})]})]})})]})}},5722:function(e,t,r){"use strict";r.d(t,{ToastProvider:function(){return u},p:function(){return f}});var n=r(7437),a=r(2265),s=r(8030);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,s.Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),i=(0,s.Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),l=(0,s.Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var d=r(4697);let o=(0,a.createContext)(null);function u(e){let{children:t}=e,[r,s]=(0,a.useState)([]),u=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=Date.now();s(n=>[...n,{id:r,type:t,message:e}]),setTimeout(()=>{s(e=>e.filter(e=>e.id!==r))},3e3)},[]),f=e=>{s(t=>t.filter(t=>t.id!==e))},x={success:(0,n.jsx)(c,{className:"w-5 h-5 text-green-500"}),error:(0,n.jsx)(i,{className:"w-5 h-5 text-red-500"}),info:(0,n.jsx)(l,{className:"w-5 h-5 text-blue-500"})},m={success:"bg-green-50 border-green-200",error:"bg-red-50 border-red-200",info:"bg-blue-50 border-blue-200"};return(0,n.jsxs)(o.Provider,{value:{success:e=>u(e,"success"),error:e=>u(e,"error"),info:e=>u(e,"info")},children:[t,(0,n.jsx)("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2",children:r.map(e=>(0,n.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 rounded-lg border shadow-lg ".concat(m[e.type]),children:[x[e.type],(0,n.jsx)("span",{className:"text-sm font-medium",children:e.message}),(0,n.jsx)("button",{onClick:()=>f(e.id),className:"ml-2",children:(0,n.jsx)(d.Z,{className:"w-4 h-4 text-gray-400"})})]},e.id))})]})}function f(){return(0,a.useContext)(o)||{success:e=>console.log(e),error:e=>console.error(e),info:e=>console.log(e)}}},649:function(e,t,r){"use strict";r.d(t,{C:function(){return s}});var n=r(7437),a=r(9354);function s(e){let{children:t,variant:r="gray",className:s}=e;return(0,n.jsx)("span",{className:(0,a.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold",{"bg-amber-100 text-amber-700":"amber"===r,"bg-gray-100 text-gray-600":"gray"===r,"bg-green-100 text-green-700":"green"===r,"bg-red-100 text-red-700":"red"===r,"bg-blue-100 text-blue-700":"blue"===r,"bg-yellow-100 text-yellow-700":"yellow"===r,"bg-purple-100 text-purple-700":"purple"===r},s),children:t})}},6760:function(e,t,r){"use strict";r.d(t,{z:function(){return s}});var n=r(7437),a=r(9354);let s=(0,r(2265).forwardRef)((e,t)=>{let{className:r,variant:s="primary",size:c="md",disabled:i,children:l,...d}=e;return(0,n.jsx)("button",{ref:t,disabled:i,className:(0,a.cn)("inline-flex items-center justify-center font-medium rounded-md transition-all","disabled:opacity-50 disabled:cursor-not-allowed",{"bg-primary text-white hover:bg-primary-dark":"primary"===s,"bg-gray-100 text-gray-700 hover:bg-gray-200":"secondary"===s,"bg-red-50 text-red-600 hover:bg-red-100":"danger"===s,"bg-transparent text-gray-600 hover:bg-gray-100":"ghost"===s,"px-2 py-1 text-sm":"sm"===c,"px-4 py-2":"md"===c,"px-6 py-3 text-lg":"lg"===c},r),...d,children:l})});s.displayName="Button"},9155:function(e,t,r){"use strict";r.d(t,{I:function(){return c}});var n=r(7437),a=r(2265),s=r(9354);let c=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("input",{ref:t,className:(0,s.cn)("px-3 py-2 border border-gray-200 rounded-md text-sm","focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent","placeholder:text-gray-400","disabled:bg-gray-50 disabled:cursor-not-allowed",r),...a})});c.displayName="Input"},4530:function(e,t,r){"use strict";r.d(t,{P:function(){return c}});var n=r(7437),a=r(2265),s=r(9354);let c=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("select",{ref:t,className:(0,s.cn)("px-3 py-2 border border-gray-200 rounded-md text-sm bg-white","focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent","disabled:bg-gray-50 disabled:cursor-not-allowed",r),...a})});c.displayName="Select"},5105:function(e,t,r){"use strict";r.d(t,{NQ:function(){return l},X8:function(){return s},_I:function(){return a},aJ:function(){return c},nr:function(){return i}}),r(4590);var n=r(8064),a=(0,n.$)("2537f0970cc942e59ac62a8ce41c4e87b358ad5c");(0,n.$)("258a043927e08ccdd71c91d3e63379b606f40201"),(0,n.$)("8169b0898713d3a98a72ce59b40a0b662355e7f5"),(0,n.$)("a6dd21c3c9b30d7cd514d605a394e13aa287e09c"),(0,n.$)("879f36fcebbf1cc1568a46d7ee3d7e79c42cd2e5"),(0,n.$)("854d5b6f1801a6972e4b5e08fbce4bb653a4997f"),(0,n.$)("1a9bfd6efe5affb0bbb21cab6cc7616b94c6686c"),(0,n.$)("8aefcfd1aa18444ddff647a9d765d712581ab5a2");var s=(0,n.$)("dab1d3728bf2fb50721db5e2e7fa0ebdcfa90529"),c=(0,n.$)("a904f77f4840b341b0f8eea416e7d35426925d97"),i=(0,n.$)("622ce3567e2f7329dc353ec2081913520b194ef1"),l=(0,n.$)("5a3aa42b0c43cc5d6aaf4c207b83081352c754c3");(0,n.$)("4bb502ca318ceb3ac780650a6fc18d0fe373e60c")},9354:function(e,t,r){"use strict";r.d(t,{K7:function(){return o},cn:function(){return s},mE:function(){return l},ol:function(){return u},p1:function(){return d},p6:function(){return i},sS:function(){return c}});var n=r(4839),a=r(6164);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}function c(e){return e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB"}function i(e){if(!e)return"-";let t=new Date(e);return t.setMinutes(t.getMinutes()+552),t.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function l(e){return({docx:"DOCX文档",user_info:"个人信息",screenshot:"反馈截图"})[e]||e}function d(e){return({docx:"badge-blue",user_info:"badge-green",screenshot:"badge-purple"})[e]||""}function o(e){return({suggestion:"功能建议",bug:"Bug报告",ux:"用户体验",performance:"性能问题",other:"其他"})[e]||e}function u(e){return({pending:"待处理",processing:"处理中",resolved:"已解决",closed:"已关闭"})[e]||e}}},function(e){e.O(0,[868,971,23,744],function(){return e(e.s=7146)}),_N_E=e.O()}]);