(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[703],{8639:function(e,t,r){Promise.resolve().then(r.bind(r,9739))},8030:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var s=r(2265);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:n=24,strokeWidth:c=2,absoluteStrokeWidth:i,className:d="",children:o,iconNode:u,...x}=e;return(0,s.createElement)("svg",{ref:t,...l,width:n,height:n,stroke:r,strokeWidth:i?24*Number(c)/Number(n):c,className:a("lucide",d),...x},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(o)?o:[o]])}),i=(e,t)=>{let r=(0,s.forwardRef)((r,l)=>{let{className:i,...d}=r;return(0,s.createElement)(c,{ref:l,iconNode:t,className:a("lucide-".concat(n(e)),i),...d})});return r.displayName="".concat(e),r}},4697:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(8030).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9739:function(e,t,r){"use strict";r.d(t,{LogsTab:function(){return o}});var s=r(7437),n=r(2265),a=r(649),l=r(9155),c=r(4530),i=r(5260),d=r(9354);function o(e){let{initialLogs:t}=e,[r,o]=(0,n.useState)(t),[u,x]=(0,n.useState)(""),[m,p]=(0,n.useState)(""),[f,h]=(0,n.useState)(null),[g,y]=(0,n.useState)(!1),b=r.filter(e=>(!u||!!e.username.includes(u))&&(!m||e.action===m)),j=e=>{h(e),y(!0)};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"操作日志"}),(0,s.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,s.jsx)(l.I,{type:"text",placeholder:"筛选用户名",value:u,onChange:e=>x(e.target.value),className:"w-40"}),(0,s.jsxs)(c.P,{value:m,onChange:e=>p(e.target.value),className:"w-36",children:[(0,s.jsx)("option",{value:"",children:"所有操作"}),(0,s.jsx)("option",{value:"注册",children:"注册"}),(0,s.jsx)("option",{value:"登录",children:"登录"}),(0,s.jsx)("option",{value:"提交文档处理",children:"提交文档处理"}),(0,s.jsx)("option",{value:"提交反馈",children:"提交反馈"}),(0,s.jsx)("option",{value:"文档处理失败",children:"文档处理失败"})]})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"用户"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"操作"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"详情"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"IP"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"状态"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"时间"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"数据"})]})}),(0,s.jsxs)("tbody",{className:"divide-y divide-gray-100",children:[b.map(e=>(0,s.jsxs)("tr",{onClick:()=>j(e),className:"hover:bg-amber-50 transition-colors cursor-pointer",children:[(0,s.jsx)("td",{className:"px-4 py-3 font-mono text-sm",children:e.id}),(0,s.jsx)("td",{className:"px-4 py-3",children:e.username}),(0,s.jsx)("td",{className:"px-4 py-3",children:e.action}),(0,s.jsx)("td",{className:"px-4 py-3 max-w-xs truncate text-sm text-gray-500",children:e.details||"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:e.ip_address||"-"}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)(a.C,{variant:"success"===e.status?"green":"red",children:"success"===e.status?"成功":"失败"})}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:(0,d.p6)(e.created_at)}),(0,s.jsx)("td",{className:"px-4 py-3",children:e.submitted_data?"\uD83D\uDCC4":""})]},e.id)),0===b.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:8,className:"px-4 py-8 text-center text-gray-500",children:"暂无日志"})})]})]})}),(0,s.jsx)(i.u,{isOpen:g,onClose:()=>y(!1),title:"操作详情",children:f&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"基本信息"}),(0,s.jsxs)("pre",{className:"bg-gray-50 p-3 rounded text-sm",children:["用户名: ",f.username,"操作: ",f.action,"状态: ","success"===f.status?"成功":"失败","时间: ",(0,d.p6)(f.created_at),"IP: ",f.ip_address||"-"]})]}),f.details&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"详细信息"}),(0,s.jsx)("pre",{className:"bg-gray-50 p-3 rounded text-sm",children:f.details})]}),f.submitted_data&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"提交数据"}),(0,s.jsx)("pre",{className:"bg-gray-50 p-3 rounded text-sm",children:JSON.stringify(f.submitted_data,null,2)})]})]})})]})}},649:function(e,t,r){"use strict";r.d(t,{C:function(){return a}});var s=r(7437),n=r(9354);function a(e){let{children:t,variant:r="gray",className:a}=e;return(0,s.jsx)("span",{className:(0,n.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold",{"bg-amber-100 text-amber-700":"amber"===r,"bg-gray-100 text-gray-600":"gray"===r,"bg-green-100 text-green-700":"green"===r,"bg-red-100 text-red-700":"red"===r,"bg-blue-100 text-blue-700":"blue"===r,"bg-yellow-100 text-yellow-700":"yellow"===r,"bg-purple-100 text-purple-700":"purple"===r},a),children:t})}},9155:function(e,t,r){"use strict";r.d(t,{I:function(){return l}});var s=r(7437),n=r(2265),a=r(9354);let l=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("input",{ref:t,className:(0,a.cn)("px-3 py-2 border border-gray-200 rounded-md text-sm","focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent","placeholder:text-gray-400","disabled:bg-gray-50 disabled:cursor-not-allowed",r),...n})});l.displayName="Input"},5260:function(e,t,r){"use strict";r.d(t,{u:function(){return c}});var s=r(7437),n=r(2265),a=r(4697),l=r(4887);function c(e){let{isOpen:t,onClose:r,title:c,children:i}=e,d=(0,n.useRef)(null);return((0,n.useEffect)(()=>{let e=e=>{"Escape"===e.key&&r()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow=""}},[t,r]),t)?(0,l.createPortal)((0,s.jsx)("div",{ref:d,className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:e=>e.target===d.current&&r(),children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:c}),(0,s.jsx)("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:(0,s.jsx)(a.Z,{className:"w-5 h-5 text-gray-500"})})]}),(0,s.jsx)("div",{className:"p-6",children:i})]})}),document.body):null}},4530:function(e,t,r){"use strict";r.d(t,{P:function(){return l}});var s=r(7437),n=r(2265),a=r(9354);let l=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("select",{ref:t,className:(0,a.cn)("px-3 py-2 border border-gray-200 rounded-md text-sm bg-white","focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent","disabled:bg-gray-50 disabled:cursor-not-allowed",r),...n})});l.displayName="Select"},9354:function(e,t,r){"use strict";r.d(t,{K7:function(){return o},cn:function(){return a},mE:function(){return i},ol:function(){return u},p1:function(){return d},p6:function(){return c},sS:function(){return l}});var s=r(4839),n=r(6164);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}function l(e){return e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB"}function c(e){if(!e)return"-";let t=new Date(e);return t.setMinutes(t.getMinutes()+552),t.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function i(e){return({docx:"DOCX文档",user_info:"个人信息",screenshot:"反馈截图"})[e]||e}function d(e){return({docx:"badge-blue",user_info:"badge-green",screenshot:"badge-purple"})[e]||""}function o(e){return({suggestion:"功能建议",bug:"Bug报告",ux:"用户体验",performance:"性能问题",other:"其他"})[e]||e}function u(e){return({pending:"待处理",processing:"处理中",resolved:"已解决",closed:"已关闭"})[e]||e}}},function(e){e.O(0,[868,971,23,744],function(){return e(e.s=8639)}),_N_E=e.O()}]);