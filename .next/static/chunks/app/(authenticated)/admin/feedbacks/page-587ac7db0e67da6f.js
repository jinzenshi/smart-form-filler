(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[358],{9452:function(e,t,r){Promise.resolve().then(r.bind(r,9726))},8030:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(2265);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:u,...m}=e;return(0,n.createElement)("svg",{ref:t,...l,width:s,height:s,stroke:r,strokeWidth:c?24*Number(i)/Number(s):i,className:a("lucide",o),...m},[...u.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let r=(0,n.forwardRef)((r,l)=>{let{className:c,...o}=r;return(0,n.createElement)(i,{ref:l,iconNode:t,className:a("lucide-".concat(s(e)),c),...o})});return r.displayName="".concat(e),r}},4697:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(8030).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9726:function(e,t,r){"use strict";r.d(t,{FeedbacksTab:function(){return d}});var n=r(7437),s=r(2265),a=r(649),l=r(6760),i=r(4530),c=r(5260),o=r(9354);function d(e){let{initialFeedbacks:t}=e,[r,d]=(0,s.useState)(t),[u,m]=(0,s.useState)(""),[x,g]=(0,s.useState)(""),[h,f]=(0,s.useState)(null),[p,b]=(0,s.useState)(!1),y=r.filter(e=>(!u||e.feedback_type===u)&&(!x||e.status===x)),j=e=>{f(e),b(!0)},v=e=>{switch(e){case"pending":return"yellow";case"processing":return"blue";case"resolved":return"green";default:return"gray"}};return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"用户反馈"}),(0,n.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,n.jsxs)(i.P,{value:u,onChange:e=>m(e.target.value),className:"w-36",children:[(0,n.jsx)("option",{value:"",children:"所有类型"}),(0,n.jsx)("option",{value:"suggestion",children:"功能建议"}),(0,n.jsx)("option",{value:"bug",children:"Bug报告"}),(0,n.jsx)("option",{value:"ux",children:"用户体验"}),(0,n.jsx)("option",{value:"performance",children:"性能问题"}),(0,n.jsx)("option",{value:"other",children:"其他"})]}),(0,n.jsxs)(i.P,{value:x,onChange:e=>g(e.target.value),className:"w-36",children:[(0,n.jsx)("option",{value:"",children:"所有状态"}),(0,n.jsx)("option",{value:"pending",children:"待处理"}),(0,n.jsx)("option",{value:"processing",children:"处理中"}),(0,n.jsx)("option",{value:"resolved",children:"已解决"}),(0,n.jsx)("option",{value:"closed",children:"已关闭"})]})]})]}),(0,n.jsxs)("div",{className:"grid gap-4",children:[y.map(e=>(0,n.jsxs)("div",{className:"bg-white rounded-lg p-5 shadow-sm border hover:shadow-md transition-shadow",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,n.jsx)("span",{className:"font-medium",children:e.username}),(0,n.jsx)("div",{className:"flex",children:[1,2,3,4,5].map(t=>(0,n.jsx)("span",{className:"text-sm ".concat(t<=e.rating?"text-amber-500":"text-gray-300"),children:"★"},t))}),e.status&&(0,n.jsx)(a.C,{variant:v(e.status),children:(0,o.ol)(e.status)}),(0,n.jsx)("span",{className:"ml-auto text-sm text-gray-400",children:(0,o.p6)(e.created_at)})]}),(0,n.jsx)("h4",{className:"font-medium mb-2",children:e.title||"无标题"}),(0,n.jsx)("p",{className:"text-gray-600 mb-3",children:e.description||e.content}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-sm text-gray-400 bg-gray-100 px-2 py-1 rounded",children:(0,o.K7)(e.feedback_type||"other")}),(0,n.jsx)(l.z,{onClick:()=>j(e),variant:"secondary",size:"sm",children:"查看详情"})]})]},e.id)),0===y.length&&(0,n.jsx)("div",{className:"text-center py-8 text-gray-500",children:"暂无反馈"})]}),(0,n.jsx)(c.u,{isOpen:p,onClose:()=>b(!1),title:"反馈详情",children:h&&(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"基本信息"}),(0,n.jsxs)("pre",{className:"bg-gray-50 p-3 rounded text-sm",children:["用户: ",h.username,"类型: ",(0,o.K7)(h.feedback_type||"other"),"评分: ",h.rating,"/5星 状态: ",(0,o.ol)(h.status||""),"时间: ",(0,o.p6)(h.created_at)]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"标题"}),(0,n.jsx)("pre",{className:"bg-gray-50 p-3 rounded text-sm",children:h.title||"无标题"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"详细描述"}),(0,n.jsx)("pre",{className:"bg-gray-50 p-3 rounded text-sm",children:h.description||h.content})]}),h.contact_email&&(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"联系方式"}),(0,n.jsx)("pre",{className:"bg-gray-50 p-3 rounded text-sm",children:h.contact_email})]}),h.screenshot_path&&(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"截图"}),(0,n.jsx)("img",{src:"/".concat(h.screenshot_path),alt:"截图",className:"max-w-full rounded border",onError:e=>e.currentTarget.style.display="none"})]}),h.admin_reply&&(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"管理员回复"}),(0,n.jsx)("pre",{className:"bg-gray-50 p-3 rounded text-sm",children:h.admin_reply})]})]})})]})}},649:function(e,t,r){"use strict";r.d(t,{C:function(){return a}});var n=r(7437),s=r(9354);function a(e){let{children:t,variant:r="gray",className:a}=e;return(0,n.jsx)("span",{className:(0,s.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold",{"bg-amber-100 text-amber-700":"amber"===r,"bg-gray-100 text-gray-600":"gray"===r,"bg-green-100 text-green-700":"green"===r,"bg-red-100 text-red-700":"red"===r,"bg-blue-100 text-blue-700":"blue"===r,"bg-yellow-100 text-yellow-700":"yellow"===r,"bg-purple-100 text-purple-700":"purple"===r},a),children:t})}},6760:function(e,t,r){"use strict";r.d(t,{z:function(){return a}});var n=r(7437),s=r(9354);let a=(0,r(2265).forwardRef)((e,t)=>{let{className:r,variant:a="primary",size:l="md",disabled:i,children:c,...o}=e;return(0,n.jsx)("button",{ref:t,disabled:i,className:(0,s.cn)("inline-flex items-center justify-center font-medium rounded-md transition-all","disabled:opacity-50 disabled:cursor-not-allowed",{"bg-primary text-white hover:bg-primary-dark":"primary"===a,"bg-gray-100 text-gray-700 hover:bg-gray-200":"secondary"===a,"bg-red-50 text-red-600 hover:bg-red-100":"danger"===a,"bg-transparent text-gray-600 hover:bg-gray-100":"ghost"===a,"px-2 py-1 text-sm":"sm"===l,"px-4 py-2":"md"===l,"px-6 py-3 text-lg":"lg"===l},r),...o,children:c})});a.displayName="Button"},5260:function(e,t,r){"use strict";r.d(t,{u:function(){return i}});var n=r(7437),s=r(2265),a=r(4697),l=r(4887);function i(e){let{isOpen:t,onClose:r,title:i,children:c}=e,o=(0,s.useRef)(null);return((0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&r()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow=""}},[t,r]),t)?(0,l.createPortal)((0,n.jsx)("div",{ref:o,className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:e=>e.target===o.current&&r(),children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-auto",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold",children:i}),(0,n.jsx)("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:(0,n.jsx)(a.Z,{className:"w-5 h-5 text-gray-500"})})]}),(0,n.jsx)("div",{className:"p-6",children:c})]})}),document.body):null}},4530:function(e,t,r){"use strict";r.d(t,{P:function(){return l}});var n=r(7437),s=r(2265),a=r(9354);let l=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("select",{ref:t,className:(0,a.cn)("px-3 py-2 border border-gray-200 rounded-md text-sm bg-white","focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent","disabled:bg-gray-50 disabled:cursor-not-allowed",r),...s})});l.displayName="Select"},9354:function(e,t,r){"use strict";r.d(t,{K7:function(){return d},cn:function(){return a},mE:function(){return c},ol:function(){return u},p1:function(){return o},p6:function(){return i},sS:function(){return l}});var n=r(4839),s=r(6164);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}function l(e){return e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB"}function i(e){if(!e)return"-";let t=new Date(e);return t.setMinutes(t.getMinutes()+552),t.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function c(e){return({docx:"DOCX文档",user_info:"个人信息",screenshot:"反馈截图"})[e]||e}function o(e){return({docx:"badge-blue",user_info:"badge-green",screenshot:"badge-purple"})[e]||""}function d(e){return({suggestion:"功能建议",bug:"Bug报告",ux:"用户体验",performance:"性能问题",other:"其他"})[e]||e}function u(e){return({pending:"待处理",processing:"处理中",resolved:"已解决",closed:"已关闭"})[e]||e}}},function(e){e.O(0,[868,971,23,744],function(){return e(e.s=9452)}),_N_E=e.O()}]);